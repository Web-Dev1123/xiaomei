(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"0671":function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return d}));var n=i("b49e"),a=(i("64bb"),i("64a1")),o=i("cebe"),r=i("9605"),s=o.create({baseURL:"/v1",headers:{"Content-Type":"application/x-www-form-urlencoded"}});s.interceptors.request.use((function(e){return"post"!=e.method&&"put"!=e.method&&"patch"!=e.method||e.headers.QSNot||(e.data=r.stringify(e.data)),"delete"==e.method&&(e.data=e.id),e}),(function(e){return Promise.reject(err)})),s.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var d=o.create({baseURL:"/v2",headers:{"Content-Type":"application/x-www-form-urlencoded"}});d.interceptors.request.use((function(e){var t=window.navigator.userAgent,i=(new Date).getTime(),o=e.url;if(("post"==e.method||"put"==e.method||"patch"==e.method)&&!e.headers.QSNot){var s=Object(a["a"])(i,e.data.visitorId,t,o);e.params=Object(n["a"])(Object(n["a"])({},s),e.params),e.data=r.stringify(e.data)}if("delete"==e.method)e.data=e.id;else if("get"==e.method){var d=Object(a["a"])(i,e.params.visitorId,t,o);e.params=Object(n["a"])(Object(n["a"])({},d),e.params)}return e}),(function(e){return Promise.reject(err)})),d.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},"072d":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.tcVodCan,expression:"tcVodCan"}]},[i("video",{staticClass:"tc-vod-class",attrs:{id:e.playerContainerId,preload:"auto",playsinline:"","webkit-playsinline":""}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.tcVodCan,expression:"!tcVodCan"}]},[i("video",{staticClass:"tc-vod-class",attrs:{id:e.defaultPlayerId,src:e.videoUrl,muted:"",controls:"",preload:"auto",controlslist:"nodownload","webkit-playsinline":"",playsinline:"","x5-playsinline":"","x-webkit-airplay":"allow"},domProps:{muted:!0},on:{loadeddata:e.scrollBarMove}},[i("source",{attrs:{src:e.videoUrl,type:"video/mp4"}}),i("object",{attrs:{data:e.videoUrl}},[i("embed",{attrs:{src:e.videoUrl}})])])])])},a=[],o=(i("8c46"),{name:"TcVodPlayer",data:function(){return{player:null,tcVodCan:!0,defaultPlayerId:this.playerContainerId+"_d"}},props:{playerContainerId:{type:String,required:!0},videoUrl:{type:String,required:!0}},computed:{},mounted:function(){var e=this;"undefined"!=typeof WeixinJSBridge?WeixinJSBridge.invoke("getNetworkType",{},(function(t){e.initData()}),!1):e.initData()},methods:{scrollBarMove:function(){this.$emit("scrollMove")},defaultPlayerPlay:function(){var e=this,t=document.getElementById(e.defaultPlayerId);t&&("undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke("getNetworkType",{},(function(e){t.play(),setTimeout((function(){t.pause()}),200)}),!1),t.oncontextmenu=function(e){return e.preventDefault(),e.returnValue=!1,!1})},initData:function(){var e=this;this.player=TCPlayer(this.playerContainerId,{}),this.videoUrl&&this.player.src(this.videoUrl),e.player.ready((function(){for(var e=document.getElementsByClassName("tcp-right-click-popup-menu"),t=0;t<e.length;t++)e[t].innerHTML=""})),e.player.on("error",(function(t){e.tcVodCan=!1,window.setTimeout((function(){e.player.dispose(),e.defaultPlayerPlay()}),0),e.scrollBarMove()}))}},destroyed:function(){this.tcVodCan&&this.player.dispose()}}),r=o,s=(i("472d"),i("cba8")),d=Object(s["a"])(r,n,a,!1,null,"75c7d300",null);t["a"]=d.exports},"07a7":function(e,t,i){"use strict";i("ffcc")},2795:function(e,t,i){},"35aa":function(t,i,n){"use strict";var a={};n.r(a),n.d(a,"textLength",(function(){return o})),n.d(a,"areaLength",(function(){return r})),n.d(a,"tmtSourceLang",(function(){return s})),n.d(a,"tmtTargetLang",(function(){return d})),n.d(a,"emojiRegex",(function(){return c})),n.d(a,"emojiMap",(function(){return u})),n.d(a,"emojiToImage",(function(){return l}));n("01d7"),n("426a"),n("657a"),n("5bf8"),n("2b12"),n("e8f4"),n("40fe"),n("8c46"),n("3d7a"),n("8786"),n("d009"),n("64bb"),n("4895"),n("aba3"),n("f04d"),n("19a7"),n("48c3"),n("00c4"),n("eadf"),n("e1c9"),n("330c"),n("50cb"),n("f73c"),n("4f07"),n("0d73"),n("3268"),n("e6cb"),n("85eb"),n("9023"),n("b8a6"),n("5806"),n("acf2"),n("bee0"),n("5df3"),n("e223"),n("ce45"),n("6669"),n("fe53"),n("7ae4");var o=30,r=500,s={auto:"自动识别",zh:"简体中文","zh-TW":"繁体中文",en:"英语",ja:"日语",ko:"韩语",fr:"法语",es:"西班牙语",it:"意大利语",de:"德语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语",vi:"越南语",id:"印尼语",th:"泰语",ms:"马来西亚语",ar:"阿拉伯语",hi:"印地语"},d={auto:{zh:"简体中文","zh-TW":"繁体中文",en:"英语",ja:"日语",ko:"韩语",fr:"法语",es:"西班牙语",it:"意大利语",de:"德语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语",vi:"越南语",id:"印尼语",th:"泰语",ms:"马来西亚语",ar:"阿拉伯语",hi:"印地语"},zh:{en:"英语",ja:"日语",ko:"韩语",fr:"法语",es:"西班牙语",it:"意大利语",de:"德语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语",vi:"越南语",id:"印尼语",th:"泰语",ms:"马来语"},"zh-TW":{en:"英语",ja:"日语",ko:"韩语",fr:"法语",es:"西班牙语",it:"意大利语",de:"德语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语",vi:"越南语",id:"印尼语",th:"泰语",ms:"马来语"},en:{zh:"中文",ja:"日语",ko:"韩语",fr:"法语",es:"西班牙语",it:"意大利语",de:"德语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语",vi:"越南语",id:"印尼语",th:"泰语",ms:"马来语",ar:"阿拉伯语",hi:"印地语"},ja:{zh:"中文",en:"英语",ko:"韩语"},ko:{zh:"中文",en:"英语",ja:"日语"},fr:{zh:"中文",en:"英语",es:"西班牙语",it:"意大利语",de:"德语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语"},es:{zh:"中文",en:"英语",fr:"法语",it:"意大利语",de:"德语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语"},it:{zh:"中文",en:"英语",fr:"法语",es:"西班牙语",de:"德语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语"},de:{zh:"中文",en:"英语",fr:"法语",es:"西班牙语",it:"意大利语",tr:"土耳其语",ru:"俄语",pt:"葡萄牙语"},tr:{zh:"中文",en:"英语",fr:"法语",es:"西班牙语",it:"意大利语",de:"德语",ru:"俄语",pt:"葡萄牙语"},ru:{zh:"中文",en:"英语",fr:"法语",es:"西班牙语",it:"意大利语",de:"德语",tr:"土耳其语",pt:"葡萄牙语"},pt:{zh:"中文",en:"英语",fr:"法语",es:"西班牙语",it:"意大利语",de:"德语",tr:"土耳其语",ru:"俄语"},vi:{zh:"中文",en:"英语"},id:{zh:"中文",en:"英语"},th:{zh:"中文",en:"英语"},ms:{zh:"中文",en:"英语"},ar:{en:"英语"},hi:{en:"英语"}},c=/(\[(微笑|撇嘴|色|发呆|得意|流泪|害羞|闭嘴|睡|大哭|尴尬|发怒|调皮|呲牙|惊讶|难过|酷|冷汗|抓狂|吐|偷笑|可爱|白眼|傲慢|饥饿|困|惊恐|流汗|憨笑|悠闲|奋斗|咒骂|疑问|嘘|晕|疯了|衰|骷髅|敲打|再见|擦汗|抠鼻|鼓掌|糗大了|坏笑|左哼哼|右哼哼|哈欠|鄙视|委屈|快哭了|阴险|亲亲|吓|可怜|菜刀|西瓜|啤酒|篮球|乒乓|咖啡|饭|猪头|玫瑰|凋谢|嘴唇|爱心|心碎|蛋糕|闪电|炸弹|刀|足球|瓢虫|便便|月亮|太阳|礼物|拥抱|强|弱|握手|胜利|抱拳|勾引|拳头|差劲|爱你|No|OK|爱情|飞吻|跳跳|发抖|怄气|转圈|磕头|回头|跳绳|挥手)\])/g,u={"[微笑]":"0","[撇嘴]":"1","[色]":"2","[发呆]":"3","[得意]":"4","[流泪]":"5","[害羞]":"6","[闭嘴]":"7","[睡]":"8","[大哭]":"9","[尴尬]":"10","[发怒]":"11","[调皮]":"12","[呲牙]":"13","[惊讶]":"14","[难过]":"15","[酷]":"16","[冷汗]":"17","[抓狂]":"18","[吐]":"19","[偷笑]":"20","[可爱]":"21","[白眼]":"22","[傲慢]":"23","[饥饿]":"24","[困]":"25","[惊恐]":"26","[流汗]":"27","[憨笑]":"28","[悠闲]":"29","[奋斗]":"30","[咒骂]":"31","[疑问]":"32","[嘘]":"33","[晕]":"34","[疯了]":"35","[衰]":"36","[骷髅]":"37","[敲打]":"38","[再见]":"39","[擦汗]":"40","[抠鼻]":"41","[鼓掌]":"42","[糗大了]":"43","[坏笑]":"44","[左哼哼]":"45","[右哼哼]":"46","[哈欠]":"47","[鄙视]":"48","[委屈]":"49","[快哭了]":"50","[阴险]":"51","[亲亲]":"52","[吓]":"53","[可怜]":"54","[菜刀]":"55","[西瓜]":"56","[啤酒]":"57","[篮球]":"58","[乒乓]":"59","[咖啡]":"60","[饭]":"61","[猪头]":"62","[玫瑰]":"63","[凋谢]":"64","[嘴唇]":"65","[爱心]":"66","[心碎]":"67","[蛋糕]":"68","[闪电]":"69","[炸弹]":"70","[刀]":"71","[足球]":"72","[瓢虫]":"73","[便便]":"74","[月亮]":"75","[太阳]":"76","[礼物]":"77","[拥抱]":"78","[强]":"79","[弱]":"80","[握手]":"81","[胜利]":"82","[抱拳]":"83","[勾引]":"84","[拳头]":"85","[差劲]":"86","[爱你]":"87","[No]":"88","[OK]":"89","[爱情]":"90","[飞吻]":"91","[跳跳]":"92","[发抖]":"93","[怄气]":"94","[转圈]":"95","[磕头]":"96","[回头]":"97","[跳绳]":"98","[挥手]":"99"},l=function(e){return e=e.replace(c,(function(e){return"<img src='/static/images/emoji/"+u[e]+".gif' border='0' alt='' />"})),e},_={install:function(t,i){t.prototype.$mk_emojiToImage=function(e){return a.emojiToImage(e)},t.prototype.$mk_IEVersion=function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,i=e.indexOf("Edg")>-1&&!t,n=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){var a=new RegExp("MSIE (\\d+\\.\\d+);");a.test(e);var o=parseFloat(RegExp["$1"]);return 7==o?7:8==o?8:9==o?9:10==o?10:6}return i?-1:n?11:-1},t.prototype.$mk_showNotification=function(e,t,i){var n=this;if(e.title||(e.title=this.$mk_i18n("message.notification")),e.body||(e.body=this.$mk_i18n("message.unknownMessage")),e.bodyType?"image"==e.bodyType?e.body="图片":"video"==e.bodyType?e.body="视频":"voice"==e.bodyType&&(e.body="音频"):e.bodyType="text",e.desktopStatus){var a=window.Notification||window.mozNotification||window.webkitNotification;a?a.requestPermission((function(i){if("granted"!=i);else{e.audioUrl&&e.audioStatus&&(t&&t.pause(),t=new Audio(e.audioUrl),t.play());var o="sds"+Math.random(),r=new a(e.title,{dir:"auto",lang:"zh-CN",tag:o,icon:e.noticeImageUrl,body:e.body});r.onclick=function(){window.focus(),e.route&&Object.keys(e.route).length>0&&n.$router.push(e.route)},r.onerror=function(){},r.onshow=function(){e.duration&&0!=e.duration&&setTimeout((function(){r.close()}),e.duration)},r.onclose=function(){}}})):console.log("您的浏览器不支持系统通知,建议使用Chrome浏览")}else e.audioUrl&&e.audioStatus&&(t&&t.pause(),t=new Audio(e.audioUrl),t.play());if(e.titleChange){window.clearInterval(i);var o=1;i=window.setInterval((function(){document.title=o%2>0?e.defaultPageTitle:e.changeContent,o++,o>10&&(window.clearInterval(i),document.title=e.defaultPageTitle)}),1e3)}return i},t.prototype.$mk_initNoticeParam=function(e){var t={desktopStatus:!1,audioStatus:!1,noticeImageUrl:"/static/images/logo.png",audioUrl:"/audio/systemMessage.mp3"};if(e){if(null!=e){t.desktopStatus=e.desktopStatus,t.audioStatus=e.audioStatus;var i=this.$mk_getAudioList(),n=e.audioId;i&&i[n]&&i[n].audioUrl&&(t.audioUrl=""+i[n].audioUrl)}return t.noticeType="desktop",t.audioType="noisy",t.title="消息通知！",t.body="",t.route={},t.bodyType="text",t.duration=3e3,t.position="bottom-right",t.msgType="info",t.offset=0,t.defaultPageTitle="",t.titleChange=!0,t.changeContent="【有新消息】",t}},t.prototype.$mk_formatDate=function(e,t){if(e&&("string"==typeof e&&(e=e.replace(/-/g,"/")),e=new Date(e),e)){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substring(4-RegExp.$1.length)));var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var n in i)if(new RegExp("("+n+")").test(t)){var a=i[n]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?a:("00"+a).substr(a.length))}return t}return""},t.prototype.$mk_dealTimezoneOffset=function(e){var t=-480;if(e){var i=this.$mk_strToDate(e),n=60*(i.getTimezoneOffset()-t)*1e3;i=new Date(i.getTime()-n),e=this.$mk_formatDate(i,"yyyy-MM-dd HH:mm:ss")}return e},t.prototype.$mk_strToDate=function(e){if(e)return"string"==typeof e&&(e=e.replace(/-/g,"/")),new Date(e)},t.prototype.$mk_getDateDayDiff=function(e,t){var i=this.$mk_formatDate(e,"yyyyMMdd"),n=this.$mk_formatDate(t,"yyyyMMdd"),a=n-i;return a},t.prototype.$mk_dealShowDate=function(e,t){var i="";if(e){var n=new Date,a=["日","一","二","三","四","五","六"],o=this.$mk_strToDate(e);if(t){var r=this.$mk_formatDate(t,"yyyy-MM-dd hh:mm"),s=this.$mk_formatDate(e,"yyyy-MM-dd hh:mm");if(r==s)return i}var d=this.$mk_getDateDayDiff(o,n);if(d<=0)return i=this.$mk_formatDate(e,"hh:mm"),i;if(1==d)return i="昨天 "+this.$mk_formatDate(e,"hh:mm"),i;var c=o.getDay();return i=c>0&&c+d<=7?"星期"+a[c]+this.$mk_formatDate(e,"hh:mm"):this.$mk_formatDate(e,"yyyy-MM-dd hh:mm"),i}return i},t.prototype.$mk_formatSecond=function(e){var t=e;if(t){if(t<60)t<10&&(t="0"+t),t="00:"+t;else if(t>=60&&t<3600){var i=parseInt(t/60);i<10&&(i="0"+i);var n=parseInt(t%60);n<10&&(n="0"+n),t=i+":"+n}else if(t>=3600){var a=parseInt(t/3600);a<10&&(a="0"+a);var o=parseInt(t%3600/60);o<10&&(o="0"+o);var r=parseInt(t%60);r<10&&(r="0"+r),t=a+":"+o+":"+r}}else t="00:00";return t},t.prototype.$mk_getUserAgent=function(){var e=window.navigator.userAgent;function t(){return!!e.match(/AppleWebKit.*Mobile.*|Android|Windows Phone|webOS|iPhone|iPod|mobile|BlackBerry|iPad|nokia|wap|symbian|symbianos|sony|ucweb|operamobi/i)}function i(){return!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function n(){return e.indexOf("Android")>-1||e.indexOf("Adr")>-1}var a=function(){return e.toLowerCase().indexOf("micromessenger")>-1},o=function(){return null!=e&&/IPhone/i.test(e)};return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),isMobile:t(),isIOS:i(),isAndroid:n(),iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:a(),isIPhone:o(),userAgent:e}},t.prototype.$mk_i18nMessage=function(e,t,i){var n=t+"."+i,a=this.$t(n);n==a&&(e="error",a=this.$t("resultCode.xxxx")+":"+n),this.$message({duration:1e3,type:e,message:a,center:!0})},t.prototype.$mk_i18n=function(e){var t=this.$t(e);return t},t.prototype.$mk_i18nSplit=function(e){var t=this.$t(e);return e==t&&(t=this.$t("commCode.undefined")),t+=this.$t("symbol.separator"),t},t.prototype.$mk_i18nService=function(e,t){var i=this,n=e;if(n&&0==n.indexOf("service.")){var a=n.split("^@#");n=i.$mk_i18n(t+"."+a[0]),a&&a.length>1&&(n&&"Undefined"!=n?(a.shift(),n=this.$mk_fillIn(n,a)):n=e)}return n},t.prototype.$mk_fillIn=function(e,t){for(var i=0;i<t.length;i++){var n=new RegExp("\\{\\{"+i+"\\}\\}","g");e=e.replace(n,t[i])}return e},t.prototype.$mk_findIndexInArray=function(e,t,i){var n=-1;if(e&&e.length>0&&t&&i)for(var a=0;a<e.length;a++)if(e[a]&&e[a][t]&&e[a][t]==i){n=a;break}return n},t.prototype.$mk_uuidWithoutBreak=function(){return this.$mk_uuid().replace(/-/g,"")},t.prototype.$mk_uuid=function(){var e=window.crypto||window.msCrypto;return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^e.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},t.prototype.$vt_setCookie=function(e,t){new Date;var i="expires=Fri, 31 Dec 9999 23:59:59 GMT";document.cookie=e+"="+t+"; "+i},t.prototype.$vt_getCookie=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){var a=i[n].trim();if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},t.prototype.$mk_ajax=function(t,i,n,a){var o=!1;try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{o=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){o=!1}}o||"undefined"==typeof XMLHttpRequest||(o=new XMLHttpRequest),o.onreadystatechange=function(e){if(4==o.readyState){var t=o.status;if(t>=200&&t<300){var i=o.responseText;i&&i.indexOf("invite")>=0||i&&i.indexOf("refuse")>=0||i&&i.indexOf("accept"),n&&n(i)}else a&&a();o.abort()}},o.open("GET",t,i);try{o.send(null)}catch(e){}},t.prototype.$mk_getAudioList=function(e){var t={systemMessage:{id:"systemMessage",name:this.$mk_i18n("message.systemMessage")+"1",audioUrl:"/audio/systemMessage.mp3"},OnSystemInfo:{id:"OnSystemInfo",name:this.$mk_i18n("message.systemMessage")+"2",audioUrl:"/audio/OnSystemInfo.mp3"},visitorMessage:{id:"visitorMessage",name:this.$mk_i18n("message.visitorMessage")+"1",audioUrl:"/audio/visitorMessage.mp3"},OnVisitorSendMsgToMe:{id:"OnVisitorSendMsgToMe",name:this.$mk_i18n("message.visitorMessage")+"2",audioUrl:"/audio/OnVisitorSendMsgToMe.mp3"},operatorMessage:{id:"operatorMessage",name:this.$mk_i18n("message.operatorMessage")+"1",audioUrl:"/audio/operatorMessage.mp3"},onlineRemind:{id:"onlineRemind",name:this.$mk_i18n("message.onlineRemind")+"1",audioUrl:"/audio/onlineRemind.mp3"},offlineRemind:{id:"offlineRemind",name:this.$mk_i18n("message.offlineRemind")+"2",audioUrl:"/audio/offlineRemind.mp3"},newVisitor:{id:"newVisitor",name:this.$mk_i18n("message.newVisitor")+"1",audioUrl:"/audio/newVisitor.mp3"},newConversation:{id:"newConversation",name:this.$mk_i18n("message.newConversation")+"1",audioUrl:"/audio/newConversation.mp3"},Welcome:{id:"Welcome",name:this.$mk_i18n("message.newConversation")+"2",audioUrl:"/audio/Welcome.mp3"},Welcome2:{id:"Welcome2",name:"欢迎光临",audioUrl:"/audio/Welcome2.mp3"},queueMessage:{id:"queueMessage",name:this.$mk_i18n("message.queueMessage")+"1",audioUrl:"/audio/queueMessage.mp3"},OnVisitorWaitForChatting:{id:"OnVisitorWaitForChatting",name:this.$mk_i18n("message.queueMessage")+"2",audioUrl:"/audio/OnVisitorWaitForChatting.mp3"},groupMessage:{id:"groupMessage",name:this.$mk_i18n("message.groupMessage")+"1",audioUrl:"/audio/groupMessage.mp3"},GongXiNi:{id:"GongXiNi",name:"恭喜你",audioUrl:"/audio/GongXiNi.mp3"}};return t}}};i["a"]=_},"3a5e":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"circle-progress-wrapper",style:e.loadingSize},[i("div",{staticClass:"circle-progress-bg"}),i("div",{staticClass:"half-wrapper wrapper-left"},[i("div",{staticClass:"half-process process-left",style:[e.borderSize,e.processLeft]})]),i("div",{staticClass:"half-wrapper wrapper-right"},[i("div",{staticClass:"half-process process-right",style:[e.borderSize,e.processRight]})]),i("div",{staticClass:"circle-progress-before"},[e._v(" "+e._s(e.dealRate)+"% ")])])},a=[],o=(i("639d"),i("657a"),i("8786"),{name:"Loading",data:function(){return{player:null}},props:{rate:{type:String,required:!0,default:0},width:{type:Number,required:!0,default:100}},computed:{dealRate:function(){var e=0;if(void 0!=this.rate){console.log(this.rate);var t=(this.rate+"").match(/\d*\.?\d*/gi);t&&t.length>0&&(e=t[0])}var i=e%100;return 0==i&&0!=e&&(e=100),e},loadingSize:function(){return{width:this.width+"px",height:this.width+"px"}},borderSize:function(){return{"border-width":this.width/2+"px"}},processLeft:function(){var e=this.dealRate,t="transparent",i=45,n="rotate(45deg)";return e<=50?(t="transparent",n="rotate(45deg)"):e>50&&e<=100?(t="#ffffff80 #ffffff80 transparent transparent",i=45+Math.ceil((e-50)/100*360),console.log(i),n="rotate("+i+"deg)"):100==e&&(t="#ffffff80",n="rotate(225deg)"),{"border-color":t,"-webkit-transform":n,transform:n}},processRight:function(){var e=this.dealRate,t="transparent",i=45,n="rotate(45deg)";return e>0&&e<=50?(t="transparent transparent #ffffff80 #ffffff80",i=45+Math.ceil(e/100*360),n="rotate("+i+"deg)"):e>50&&e<100?(t="#ffffff80",n="rotate(225deg)"):100==e&&(t="#ffffff80",n="rotate(95deg)"),{"border-color":t,"-webkit-transform":n,transform:n}}},methods:{},mounted:function(){},watch:{rate:{handler:function(e,t){},deep:!0,immediate:!0}}}),r=o,s=(i("dfb7"),i("cba8")),d=Object(s["a"])(r,n,a,!1,null,"72debd42",null);t["a"]=d.exports},4360:function(t,i,n){"use strict";n("657a"),n("d009");var a=n("8bbf"),o=n.n(a),r=n("5880"),s=n.n(r),d=(n("8aa1"),n("bce2"),{namespaced:!0,state:function(){return{visitorId:null,keyId:null,webId:null,authId:null,socket:null,onlineVisitorId:null,appId:null,sessionId:null,messageList:[],uploadInfos:{},noticeList:{},videoRecordFlag:!1,videoSelectFlag:!1,signature:"",visitorTranslateShow:""}},mutations:{updateUploadInfo:function(e,t){t&&t.id&&(e.uploadInfos[t.id]?(t.rate&&o.a.set(e.uploadInfos[t.id],"rate",t.rate),t.state&&o.a.set(e.uploadInfos[t.id],"state",t.state)):(t.rate||(t.rate="0%"),t.state||(t.state="start"),o.a.set(e.uploadInfos,t.id,t)))},doneUploadInfo:function(e,t){t&&t.id&&e.uploadInfos[t.id]&&(o.a.set(e.uploadInfos[t.id],"rate","100%"),o.a.set(e.uploadInfos[t.id],"state","success"),t.result=!0)},deleteUploadInfo:function(e,t){t.id&&e.uploadInfos[t.id]&&o.a.delete(e.uploadInfos,t.id)},updateSocket:function(e,t){o.a.set(e,"socket",t)},updateOnlineVisitorId:function(e,t){o.a.set(e,"onlineVisitorId",t)},updateSessionId:function(e,t){o.a.set(e,"sessionId",t)},updateAppId:function(e,t){o.a.set(e,"appId",t)},initMessageList:function(e,t){o.a.set(e,"messageList",t)},concatMessageList:function(e,t){if(t&&t.addData){var i=t.addData.concat(e.messageList);o.a.set(e,"messageList",i)}},pushMessageList:function(e,t){t&&e.messageList.push(t)},spliceMessageList:function(e,t){t&&void 0!=t.index&&e.messageList.splice(t.index,1)},updateMessageByIndex:function(e,t){t&&t.index&&t.updateKey&&e.messageList[t.index]&&o.a.set(e.messageList[t.index],t.updateKey,t.updateValue)},updateMessageById:function(e,t){o.a.set(e,"appId",t)},addNotice:function(e,t){t&&void 0!=t.id&&o.a.set(e.noticeList,t.id,t)},deleteNotice:function(e,t){t&&void 0!=t.id&&o.a.delete(e.noticeList,t.id)},updateKeyId:function(e,t){t&&void 0!=t&&o.a.set(e,"keyId",t)},updateVisitorId:function(e,t){t&&void 0!=t&&o.a.set(e,"visitorId",t)},updateVideoRecordFlag:function(e,t){void 0!=t&&o.a.set(e,"videoRecordFlag",t)},updateVideoSelectFlag:function(e,t){void 0!=t&&o.a.set(e,"videoSelectFlag",t)},updateSignature:function(e,t){void 0!=t&&o.a.set(e,"signature",t)},updateVisitorTranslateShow:function(e,t){void 0!=t?o.a.set(e,"visitorTranslateShow",t):o.a.set(e,"visitorTranslateShow","")},setWebId:function(e,t){void 0!=t&&null!=t&&""!=t&&o.a.set(e,"webId",t)},setAuthId:function(e,t){void 0!=t&&null!=t&&""!=t&&o.a.set(e,"authId",t)},changeMsgReadState:function(e,t){if(t&&t.msgId){var i,n=e.messageList;if(n&&n.length>0)for(var a=n.length-1;a>=0;a--)if(i.id==t.msgId){i.readState=t.readState,i.errorCode=t.errorCode,i.errorMsg=t.errorMsg,o.a.set(e.messageList[a],"readState",t.readState),o.a.set(e.messageList[a],"errorCode",t.errorCode),o.a.set(e.messageList[a],"errorMsg",t.errorMsg);break}}}},actions:{},getters:{},modules:{}}),c=d;o.a.use(s.a);for(var u,l,_,m=new s.a.Store({state:{},mutations:{},actions:{},modules:{visitor:c}}),h=[],f=0;f<h.length;f++)if(u=h[f],_=u.split("."),l=localStorage.getItem(_[1]),l){try{l=JSON.parse(l)}catch(e){l=localStorage.getItem(_[1])}m.state[_[0]][_[1]]=l}i["a"]=m},"472d":function(e,t,i){"use strict";i("b8a9")},"64a1":function(i,a,c){"use strict";c.d(a,"a",(function(){return E})),c.d(a,"c",(function(){return O})),c.d(a,"b",(function(){return R}));var _=c("4a18"),h=(c("639d"),c("4360"));function f(e,t){var i=T();return f=function(e,t){e-=154;var n=i[e];return n},f(e,t)}(function(t,i){var n=f,a=t();while(1)try{var o=parseInt(n(219))/1+-parseInt(n(191))/2+parseInt(n(177))/3+parseInt(n(192))/4*(-parseInt(n(160))/5)+parseInt(n(188))/6*(parseInt(n(174))/7)+-parseInt(n(222))/8*(-parseInt(n(226))/9)+-parseInt(n(178))/10;if(o===i)break;a["push"](a["shift"]())}catch(e){a["push"](a["shift"]())}})(T,678405);function g(e){var t=f,i={HrcWV:function(e,t){return e<t},AtZXA:function(e,t){return e+t},CmUme:function(e,t){return e-t},bqIfA:t(220),kUeRf:function(e,t){return e(t)},xtlRI:function(e,t){return e%t},CQpCG:function(e,t){return e>=t},DdwYj:function(e,t){return e+t},xZvSR:function(e,t){return e===t},IYjJd:t(196)},n="";if(Object(_["a"])(e)==i[t(193)]&&(e=i[t(164)](Number,e)),e=i[t(212)](e,52),i["CQpCG"](e,26))n=String["fromCharCode"](i["DdwYj"](e,71));else{if(!i[t(195)](i[t(165)],i[t(165)])){var a,o,r,s=0;if(0===d[t(223)])return s;for(a=0,r=s[t(223)];i["HrcWV"](a,r);a++)o=o["charCodeAt"](a),s=i[t(200)](i[t(169)](s<<5,s),o),s|=0;return s}n=String[t(167)](e+65)}return n}function b(e){var t=f,i={dVebG:function(e,t,i){return e(t,i)},xZbya:function(e,t){return e+t},mFCiY:function(e,t){return e(t)},KENpQ:function(e,t){return e%t},REMho:"CAHtX",XXPla:function(e,t){return e-t},SwPsH:function(e,t){return e+t}},a="";if(Object(_["a"])(e)==t(220)&&(e=i[t(186)](Number,e)),e=i[t(180)](e,52),e>=26)if(i[t(162)]!==t(173))a=String[t(167)](i[t(159)](e+65,26));else{var s=i[t(187)](j,k,l);m=n(i[t(185)](o,s)+p),q=r[t(209)](0,16)}else a=String[t(167)](i[t(185)](i[t(225)](e,65),32));return a}function I(e){var t,i,n,a=f,o={QWjuR:function(e,t){return e<t},cARfd:function(e,t){return e===t},DfeaT:a(161),ZPenT:function(e,t){return e+t},JrDcu:function(e,t){return e-t},eXCUf:function(e,t){return e<<t}},r=0;if(0===e["length"])return r;for(t=0,n=e["length"];o[a(215)](t,n);t++)o[a(184)](o[a(227)],o["DfeaT"])?(i=e[a(197)](t),r=o["ZPenT"](o[a(205)](o[a(182)](r,5),r),i),r|=0):r=t;return r}function M(e,i){var n=f,a={rcvDt:function(e,t){return e&&t},cgHpc:function(e,t){return e+t},yAKDy:function(e,t){return e(t)},ntYtN:function(e,t){return e%t},Diehk:function(e,t){return e(t)},gPdVR:function(e,t){return e==t},vQhWL:function(e,t){return e&&t},sCOpS:function(e,t){return e+t},lGPhP:function(e,t){return e+t},vdkaj:function(e,t){return e<t},TXSey:function(e,t){return e!==t},Mlizs:n(156),ygeML:function(e,t){return e(t)},RKwap:function(e,t){return e^t}},o=0,d="";if(a[n(194)](e,i)){o=Math[n(170)](a[n(207)](e,I(i)));for(var c=o%511,l=a[n(190)](o,1024),_=a["lGPhP"](o,""),m="",h=0;a[n(163)](h,_[n(223)]);h+=2){if(a[n(204)](a[n(175)],a[n(175)])){var p=0,w="_";if(a["rcvDt"](h,m)){p=q[n(170)](a[n(208)](r,a[n(221)](s,t))),p=a[n(190)](p,u[n(224)](2,10));var M=a[n(166)](v,p);a[n(168)](M,"t")?w=M:w+=M}return w}m=_[h],a[n(163)](a[n(207)](h,1),_[n(223)])?m+=_[a[n(214)](h,1)]:m+=0,d+=a["ygeML"](g,a[n(211)](m,c)),d+=a[n(166)](b,m^l)}}return d}function S(e,t){var i=f,n={KGYzN:function(e,t){return e%t},irUlU:function(e,t){return e>=t},WrTqO:function(e,t){return e-t},BkXQV:function(e,t){return e+t},gVahN:function(e,t){return e(t)},xqJyw:function(e,t){return e%t},KpBYq:function(e,t){return e(t)},hqsxS:function(e,t){return e==t}},a=0,o="_";if(e&&t){if(i(217)!==i(217)){var s="";return("undefined"===typeof l?"undefined":Object(_["a"])(l))==i(220)&&(w=x(y)),p=n[i(216)](q,52),s=n["irUlU"](r,26)?z[i(167)](n[i(157)](A+65,26)):B[i(167)](n[i(201)](n[i(201)](C,65),32)),s}a=Math[i(170)](e+n[i(176)](I,t)),a=n["xqJyw"](a,Math["pow"](2,10));var d=n[i(183)](g,a);n[i(172)](d,"t")?o=d:o+=d}return o}function E(e,t,i,n){var a=f,o={URYlM:function(e,t,i){return e(t,i)},JzQtQ:function(e,t){return e(t)},nhwkt:function(e,t){return e+t},ilGxz:function(e,t){return e+t},kCegM:function(e,t){return e+t},eMSlk:function(e,t){return e+t},UcNOT:function(e,t){return e+t},MkZfF:a(203),HxeNG:a(179)},r=o["URYlM"](M,e,t),s=o[a(202)](S,e,t),d=o[a(171)](md5,o[a(189)](o[a(189)](t,r),n)+i),c=o[a(189)](o[a(189)](o["ilGxz"](o[a(154)](o[a(155)](o["nhwkt"](o[a(210)]('{"',s),o[a(158)]),d),'",'),o["HxeNG"]),e),'"}'),u=JSON["parse"](c);return u}function T(){var e=["AtZXA","BkXQV","URYlM",'":"',"TXSey","JrDcu","state","sCOpS","cgHpc","substring","UcNOT","RKwap","xtlRI","authId","lGPhP","QWjuR","KGYzN","LRlTG","wRGOi","255175JHCdpz","string","yAKDy","16dcjeWJ","length","pow","SwPsH","4211982rElaDL","DfeaT","kCegM","eMSlk","jeICB","WrTqO","MkZfF","XXPla","135KjzaVH","avKnc","REMho","vdkaj","kUeRf","IYjJd","Diehk","fromCharCode","gPdVR","CmUme","abs","JzQtQ","hqsxS","wFhhE","189SEUXAK","Mlizs","gVahN","2380803muPwTV","1661210qnEyHj",'"_t":"',"KENpQ","FohJP","eXCUf","KpBYq","cARfd","xZbya","mFCiY","dVebG","211068cLdFQX","nhwkt","ntYtN","1953846OVnkoP","164908AnkaYR","bqIfA","vQhWL","xZvSR","azYXA","charCodeAt","xwFzv","jSJSK"];return T=function(){return e},T()}function O(e,t){var i=f,n={FohJP:function(e,t){return e(t)},jSJSK:function(e,t){return e+t}},a=h["a"][i(206)]["visitor"][i(213)],o="";if(a){var r=M(t,e);o=n[i(181)](md5,n[i(199)](a,e)+r)}return o}function R(e,t){var i=f,n={xwFzv:function(e,t){return e+t},wRGOi:function(e,t){return e+t}},a=h["a"][i(206)]["visitor"][i(213)],o="";if(a){var r=M(t,e);o=md5(n[i(198)](n[i(218)](e,r),a)),o=o[i(209)](0,16)}return o}},6995:function(e,t,i){},"9a1f":function(e,t,i){"use strict";var n=i("b49e"),a=i("8bbf"),o=i.n(a),r=i("85b3"),s=i.n(r);o.a.use(s.a);var d=MKI18N.lang.en,c=MKI18N.lang.zhCN,u=MKI18N.lang.zhTW,l=MKI18N.lang.vi,_={en_US:Object(n["a"])({},d),zh_CN:Object(n["a"])({},c),zh_TW:Object(n["a"])({},u),vi:Object(n["a"])({},l)},m=new s.a({locale:"zh_CN",messages:_});t["a"]=m},a2c7:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_MyData_SourceCode_make1_pack_mkefu_00_visitor_node_modules_babel_runtime_7_17_9_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b49e"),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("01d7"),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("426a"),core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("657a"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5bf8"),core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("2b12"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("8c46"),core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b186"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("e8f4"),core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_test_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("cb99"),core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("64bb"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("5b50"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("5543"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("85b1"),core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("4595"),core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("3d7a"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("7ae4"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16__),vuex__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("5880"),vuex__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(vuex__WEBPACK_IMPORTED_MODULE_17__);__webpack_exports__["a"]={data:function data(){return{videoServerUrl:"https://video.chat5188.com",fileServicePathReg:new RegExp("@FileServicePath@","g"),i18nBtnShow:eval("true"),miniIconShow:eval("true"),userAgent:this.$mk_getUserAgent(),showTranslateFlag:!1,emojiShowFlag:!1,rangeStart:"",rangeEnd:"",rangePause:!1,range:null,recordIndex:0,recordMax:0,recordMin:0,recordLimit:20,recordType:"update"}},watch:{},beforeMount:function(){},created:function(){},mounted:function(){window.MessageNotice=this.mk_notice},methods:Object(D_MyData_SourceCode_make1_pack_mkefu_00_visitor_node_modules_babel_runtime_7_17_9_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(D_MyData_SourceCode_make1_pack_mkefu_00_visitor_node_modules_babel_runtime_7_17_9_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(D_MyData_SourceCode_make1_pack_mkefu_00_visitor_node_modules_babel_runtime_7_17_9_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_17__["mapActions"])({})),Object(vuex__WEBPACK_IMPORTED_MODULE_17__["mapMutations"])({updateUploadInfo:"visitor/updateUploadInfo",deleteUploadInfo:"visitor/deleteUploadInfo",doneUploadInfo:"visitor/doneUploadInfo",pushMessageList:"visitor/pushMessageList",addNotice:"visitor/addNotice",deleteNotice:"visitor/deleteNotice",updateVideoRecordFlag:"visitor/updateVideoRecordFlag",updateVideoSelectFlag:"visitor/updateVideoSelectFlag",updateSignature:"visitor/updateSignature",updateVisitorTranslateShow:"visitor/updateVisitorTranslateShow",updateMessageByIndex:"visitor/updateMessageByIndex"})),{},{mk_notice:function(e){var t=this,i=this.$mk_uuid();e.id=i;var n=2e3;e.duration&&(n=e.duration),t.addNotice(e),setTimeout((function(){t.deleteNotice({id:i})}),n)},pushFileMessage:function(e,t){var i={};i.id=e,i.callType="in",i.messageType="video",i.message=t,i.imageId=e,this.pushMessageList(i)},sendFileMessage:function(e,t,i,n,a){var o=this,r={messageId:o.messageId,appId:o.appId,session:o.sessionId,onlineVisitorId:o.onlineVisitorId,imageId:e,messageType:"video",message:t,fileName:i,fileSize:n,originalFileName:a};o.socket.emit("message-file",r,(function(e){e&&e.resultCode}))},selectVideo:function(e){var t=this,i=t.imageId;i||(i=this.$mk_uuidWithoutBreak()),t.imageId="";var n=e.target.files[0],a=n.name,o=/(.mp4|.mov|.webm)$/i;if(!o.test(a))return e.target.value="",void this.mk_notice({type:"error",message:t.$mk_i18n("dialogue.selectVideo"),center:!0});Math.round(n.size/1024).toFixed();if(n.size>62914560)return e.target.value="",void window.MessageNotice({type:"error",message:t.$mk_i18n("dialogue.fileSizeLimt")+"60M",duration:2e3});var r=document.createElement("video"),s=URL.createObjectURL(n),d=!1;r.preload="metadata",r.onloadstart=function(){d=!0},r.onloadedmetadata=function(){var a=Math.round(r.duration).toFixed();a>parseInt("180")?window.MessageNotice({type:"error",message:t.$mk_i18n("dialogue.videoLengthLimit")+"180s",duration:2e3}):(t.pushFileMessage(i,s),t.uploadVideo2(i,n).then((function(){e.target.value=""})).catch((function(t){console.log(t),e.target.value=""})))},"undefined"!=typeof WeixinJSBridge?WeixinJSBridge.invoke("getNetworkType",{},(function(e){r.src=s})):r.src=s,window.setTimeout((function(){d||(t.pushFileMessage(i,s),t.uploadVideo2(i,n).then((function(){e.target.value=""})).catch((function(t){console.log(t),e.target.value=""})))}),1e3)},getSignature:function(){return this.signature},signUrl:function(e,t,i){var n=this;n.$axios.post("https://tcvod.chat5188.com/api/tcvod/signUrl.do",{url:i,fileId:t,keyId:n.keyId}).then((function(t){if("0000"==t.data.resultCode){var i="",a="",o="",r=t.data.data.url;n.sendFileMessage(e,r,i,a,o)}})).catch((function(e){console.log(e)}))},uploadVideo2:function(e,t){var i=this;return new Promise((function(n,a){var o=t.name;o||(o=e),o.length>36&&(o=o.substring(o.length-36,o.length));var r={id:e,senderName:"senderName",sendTime:new Date,fileName:o,state:"loading",rate:"1%",imageId:e};i.updateUploadInfo(r);var s=new TcVod.default({getSignature:i.getSignature}),d=s.upload({mediaFile:t});d.on("media_progress",(function(e){var t=100*e.percent.toFixed(2);100==t?t=99:t<2&&(t=2),r.rate=t+"%",r.state="loading",i.updateUploadInfo(r)})),d.done().then((function(t){r.rate="99%",i.updateUploadInfo(r);var a=t.video.url,o=t.fileId;i.signUrl(e,o,a),n(t)})).catch((function(e){r.state="error",i.updateUploadInfo(r),a(e),console.log(e)}))}))},uploadVideo:function(e,t){var i=this;return new Promise((function(n,a){var o=t.name;o||(o=e),o.length>36&&(o=o.substring(o.length-36,o.length));var r=new FormData;r.append("video",t),r.append("appId",i.appId),r.append("visitorId",i.visitorId),r.append("orgi",""),r.append("callType","out"),r.append("keyId",i.keyId);var s={id:e,senderName:"senderName",sendTime:new Date,fileName:o,state:"loading",rate:"0%",imageId:e};i.updateUploadInfo(s);var d={headers:{QSNot:!0},onUploadProgress:function(e){if(e.lengthComputable){var t=Math.floor(100*e.loaded/e.total);100==t&&(t=99),s.rate=t+"%",s.state="loading",i.updateUploadInfo(s)}}};i.$axios.post(i.videoServerUrl+"/api/video/upload.do",r,d).then((function(t){if("0000"==t.data.resultCode){s.rate="99%",i.updateUploadInfo(s);var o=t.data.data.videoPath;o=o.replace(i.fileServicePathReg,i.videoServerUrl);var r=t.data.data.fileName,d=t.data.data.fileSize,c=t.data.data.originalFileName;i.sendFileMessage(e,o,r,d,c),n(t)}else a(t)})).catch((function(e){console.log(e),s.state="error",i.updateUploadInfo(s),a(e),console.log("执行cache reject()")}))}))},dealUploadReturnInfo:function(e,t,i){var n={};n.id=e,n.result=!1,this.doneUploadInfo(n);for(var a=0;a<this.messageList.length;a++)if(this.messageList[a].id==e){this.messageList[a].id=t,this.messageList[a].message=i,this.messageList[a].imageId="";break}return n.result},cursorToLast:function(){var e=document.getElementById("inputArea");if(window.getSelection){e.focus();var t=window.getSelection();t.selectAllChildren(e),t.collapseToEnd()}else if(document.selection){var i=document.selection.createRange();i.moveToElementText(e),i.collapse(!1),i.select()}},emojiShow:function(){this.emojiShowFlag=!this.emojiShowFlag},emojiHide:function(){this.emojiShowFlag=!1},selectEmoji:function(e){var t=document.getElementById("inputArea");this.emojiHide(),this.recordType="add",this.rangeStart||(this.rangeStart=""),this.rangeEnd||(this.rangeEnd=""),t.innerHTML=this.rangeStart+e.alt+this.rangeEnd,this.rangeStart=this.rangeStart+e.alt,this.rangePause=!0,this.changeInput()},changeInput:function(e){if(!this.sendding){var t=document.getElementById("inputArea"),i=t.innerHTML.trim().replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/<div>/g,"").replace(/<\/div>/g,"<br>").replace(/(<br>)*$/g,"").replace(/^(<br>)*/,"");i&&i.length>2048?(t.innerHTML=i.substring(0,2048),t.innerHTML.length>2048&&(t.innerHTML=i.substring(0,4096-t.innerHTML.length)),this.cursorToLast(),this.inputMessage=t.innerHTML):this.inputMessage=i,this.rangePause?this.rangePause=!1:this.updateRangeAt(),this.updateRecord(this.inputMessage),this.scrollBarMove()}},insertHtmlAtCaret:function(e,t){if(window.getSelection)if(this.range){var i=this.checkCanRecord(this.range);i?this.addRecord(this.range,e):t&&this.insertHtmlAtCaret(e,!1)}else t&&(this.updateRangeAt(),this.insertHtmlAtCaret(e,!1));else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)},checkCanRecord:function(e){var t=!1;return("inputArea"==e.startContainer.id||e.startContainer.parentElement&&"inputArea"==e.startContainer.parentElement.id||e.startContainer.parentNode&&"inputArea"==e.startContainer.parentNode.id)&&(t=!0),t},addRecord:function(e,t){var i=window.getSelection();e.deleteContents();var n=document.createElement("div");n.innerHTML=t;var a,o,r=document.createDocumentFragment();while(a=n.firstChild)o=r.appendChild(a);e.insertNode(r),o&&(e=e.cloneRange(),e.setStartAfter(o),e.collapse(!0),i.removeAllRanges(),i.addRange(e)),this.updateRangeAt()},updateRangeAt:function(){var e,t;if(window.getSelection&&(e=window.getSelection(),e.getRangeAt&&e.rangeCount)){t=e.getRangeAt(0);var i,n=!1;if("inputArea"==t.commonAncestorContainer.id?(n=!0,i=t.commonAncestorContainer.childNodes):t.commonAncestorContainer.parentElement&&"inputArea"==t.commonAncestorContainer.parentElement.id?(n=!0,i=t.commonAncestorContainer.parentElement.childNodes):t.commonAncestorContainer.parentNode&&"inputArea"==t.commonAncestorContainer.parentNode.id&&(n=!0,i=t.commonAncestorContainer.parentNode.childNodes),n){this.range=t;var a=t.startContainer,o=t.startOffset,r=t.endContainer,s=t.endOffset,d=!0,c=!1;this.rangeStart="",this.rangeEnd="";for(var u="",l=0;l<i.length;l++){var _=i[l];if(u=1==_.nodeType?_.outerHTML:_.data,d)if(_==a){var m=u.substring(0,o);this.rangeStart=this.rangeStart+m,d=!1,c=!0}else this.rangeStart=this.rangeStart+u;if(c)if(_==r){var h=u.substring(s);this.rangeEnd=this.rangeEnd+h,c=!0}else this.rangeEnd=this.rangeEnd+u}}}},updateRangeLeave:function(){this.range&&!this.range.collapsed&&this.range.collapse(!0)},updateRecord:function(e){if(window.sessionStorage){if("add"==this.recordType?(this.recordIndex++,this.recordType="addEnd"):("addEnd"==this.recordType||0==this.recordIndex)&&(this.recordIndex++,this.recordType="update"),this.recordMax>this.recordIndex)for(var t,i=this.recordIndex+1;i<=this.recordMax;i++)t="record"+i,sessionStorage.removeItem(t);this.recordMax=this.recordIndex;var n="record"+this.recordIndex;if(sessionStorage.setItem(n,e),this.recordMax-this.recordMin>=this.recordLimit)for(var a,o=this.recordMin;o<=this.recordMax-this.recordLimit;o++)a="record"+o,sessionStorage.removeItem(a),this.recordMin=o+1}},ctrlZ:function(e){if(window.sessionStorage&&this.recordIndex>this.recordMin){this.recordIndex--;var t="record"+this.recordIndex,i=sessionStorage.getItem(t);i&&0!=this.recordIndex||(i="");var n=document.getElementById("inputArea");n.innerHTML=i,this.cursorToLast()}e.returnValue=!1,e.preventDefault()},ctrlY:function(e){if(window.sessionStorage&&this.recordIndex<this.recordMax){this.recordIndex++;var t="record"+this.recordIndex,i=sessionStorage.getItem(t),n=document.getElementById("inputArea");n.innerHTML=i,this.cursorToLast()}e.returnValue=!1,e.preventDefault()},helpful:function(e,t,i){var n=this;n.$axios2.post("/vrapi/robot/updateQuestionStatsHelpFlag.do",{keyId:n.keyId,statsId:t,helpFlag:i}).then((function(t){if("0000"==t.data.resultCode){var i={};i.index=e,i.updateKey="canEvaluate",i.updateValue=!1,n.updateMessageByIndex(i)}})).catch((function(e){console.log(e)}))},useless:function(e,t){}}),computed:Object(D_MyData_SourceCode_make1_pack_mkefu_00_visitor_node_modules_babel_runtime_7_17_9_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_17__["mapState"])({socket:function(e){return e.visitor.socket},appId:function(e){return e.visitor.appId},keyId:function(e){return e.visitor.keyId},visitorId:function(e){return e.visitor.visitorId},onlineVisitorId:function(e){return e.visitor.onlineVisitorId},sessionId:function(e){return e.visitor.sessionId},signature:function(e){return e.visitor.signature},getUploadInfos:function(e){return function(t){var i=e.visitor.uploadInfos[t];return i||(i={},i.id=t,i.state="none"),i}},videoRecordFlag:function(e){return e.visitor.videoRecordFlag},videoSelectFlag:function(e){return e.visitor.videoSelectFlag},visitorTranslateShow:function(e){return e.visitor.visitorTranslateShow},cssVars:function(){var e="60px";return this.i18nBtnShow||(e="90px"),{"--placeholderText":this.placeholderText,height:e}}}))}},ae02:function(e,t,i){"use strict";var n=i("b49e"),a=(i("01d7"),i("426a"),i("657a"),i("5bf8"),i("2b12"),i("8786"),i("ee6c"),i("3d7a"),i("5880"));t["a"]={data:function(){return{userAgent:this.$mk_getUserAgent(),siteCode:""}},watch:{},beforeMount:function(){},created:function(){this.siteCode=this.getQueryString("siteCode")},mounted:function(){var e=this;e.$nextTick((function(){this.initSystemInfo()}))},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(a["mapActions"])({})),Object(a["mapMutations"])({setWebId:"visitor/setWebId",setAuthId:"visitor/setAuthId"})),{},{getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);return null!=i?decodeURIComponent(i[2]):null},initSystemInfo:function(){var e=this;e.$axios2.get("/vrapi/getSysInfo.do",{params:{appId:this.appId,visitorId:this.visitorId,deviceType:e.deviceType,dialogType:"link"}}).then((function(t){"0000"==t.data.resultCode?(e.setWebId(t.data.data.keyId),e.setAuthId(t.data.data.authId)):"enterpriseNotExists"==t.data.resultCode?(e.pageReady=!1,e.errorMessage=e.$mk_i18n("dialogue.linkNotExist"),window.location.replace(e.webPath+"/404.html")):"1025"==t.data.resultCode?(e.pageReady=!1,e.errorMessage=e.$mk_i18n("dialogue.errorCode")+"1025"):"1026"==t.data.resultCode?(e.pageReady=!1,e.errorMessage=e.$mk_i18n("dialogue.errorCode")+"1026"):"1040"==t.data.resultCode?(e.pageReady=!1,e.errorMessage=e.$mk_i18n("dialogue.errorCode")+"1040"):(e.pageReady=!1,e.errorMessage=e.$mk_i18n("dialogue.systemError")+response.data.resultCode+","+e.$mk_i18n("dialogue.contactAdmin"))})).catch((function(t){e.pageReady=!1,e.errorMessage=e.$mk_i18n("dialogue.systemError")+t+","+e.$mk_i18n("dialogue.contactAdmin"),console.log(t)}))},getAutoMsg:function(){var e=this;e.$axios2.get("/vrapi/getAutoMsg.do",{params:{appId:this.appId,visitorId:this.visitorId}}).then((function(t){if("0000"==t.data.resultCode){var i=t.data.data.welcomeMsg;if(i){var n={messageClass:"promote"};n.message=i,e.messageList&&e.pushMessageList(n)}}})).catch((function(t){e.pageReady=!1,e.errorMessage=e.$mk_i18n("dialogue.systemError")+t+","+e.$mk_i18n("dialogue.contactAdmin"),console.log(t)}))}}),computed:Object(n["a"])({},Object(a["mapState"])({socket:function(e){return e.visitor.socket},appId:function(e){return e.visitor.appId},webId:function(e){return e.visitor.webId},visitorId:function(e){return e.visitor.visitorId},messageList:function(e){return e.visitor.messageList},cssVars:function(){var e="60px";return this.i18nBtnShow||(e="90px"),{"--placeholderText":this.placeholderText,height:e}}}))}},b8a9:function(e,t,i){},ca3d:function(e,t,i){"use strict";i("6995")},cc65:function(t,i,n){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"mf_v_img_v"}},[Array.isArray(e.thumb)?[i("ul",{class:e.listUlClass},e._l(e.thumb,(function(t,n){return i("li",{key:n,staticStyle:{position:"relative"}},[i("img",{attrs:{src:t,alt:""},on:{click:function(t){return e.showFullViewer(n)}}}),e._t("default",null,{index:n})],2)})),0)]:[i("img",{staticClass:"thumb-image",attrs:{src:e.thumb,alt:""},on:{click:e.showFullViewer,load:e.imgLoad}})],i("transition",{attrs:{name:"fade","enter-active-class":"fadeIn","leave-active-class":"fadeOut"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.fullViewerVisible,expression:"fullViewerVisible"}],staticClass:"viewer-container viewer-backdrop viewer-fixed viewer-fade viewer-transition viewer-in",staticStyle:{"z-index":"99999"},attrs:{"touch-action":"none"}},[i("div",{staticClass:"viewer-canvas",attrs:{"data-viewer-action":"hide"},on:{click:function(t){return t.target!==t.currentTarget?null:e.hideFullViewer.apply(null,arguments)}}},[i("img",{ref:"fullImage",staticClass:"viewer-move full-image animate-transform",style:e.fullImageStyle,attrs:{src:Array.isArray(e.full)?e.full[e.listActiveIndex]:e.full,id:"full-image",alt:""},on:{mousewheel:e.toggleZoomFullImage}})]),i("div",{staticClass:"viewer-footer"},[i("div",{staticClass:"viewer-title"},[e._v(" "+e._s(e.multiple?e.title[e.listActiveIndex]||"-":e.title)+" ("+e._s(e.fullImageWidth)+" × "+e._s(e.fullImageHeight)+") ")]),i("div",{staticClass:"viewer-toolbar"},[i("ul",[i("li",{staticClass:"viewer-zoom-in",attrs:{role:"button","data-viewer-action":"zoom-in"},on:{click:e.zoomIn}}),i("li",{staticClass:"viewer-zoom-out",attrs:{role:"button","data-viewer-action":"zoom-out"},on:{click:e.zoomOut}}),i("li",{staticClass:"viewer-reset",attrs:{role:"button","data-viewer-action":"reset"},on:{click:e.resetFullImage}}),e.multiple?i("li",{staticClass:"viewer-prev",attrs:{role:"button","data-viewer-action":"prev"},on:{click:e.prev}}):e._e(),e.multiple?i("li",{staticClass:"viewer-play viewer-large",attrs:{role:"button","data-viewer-action":"play"},on:{click:e.fullScreenPlay}}):e._e(),e.multiple?i("li",{staticClass:"viewer-next",attrs:{role:"button","data-viewer-action":"next"},on:{click:e.next}}):e._e(),i("li",{staticClass:"viewer-rotate-left",attrs:{role:"button","data-viewer-action":"rotate-left"},on:{click:e.fullImageRotateLeft}}),i("li",{staticClass:"viewer-rotate-right",attrs:{role:"button","data-viewer-action":"rotate-right"},on:{click:e.fullImageRotateRight}}),i("li",{staticClass:"viewer-flip-horizontal",attrs:{role:"button","data-viewer-action":"flip-horizontal"},on:{click:e.toggleFullImageScaleX}}),i("li",{staticClass:"viewer-flip-vertical",attrs:{role:"button","data-viewer-action":"flip-vertical"},on:{click:e.toggleFullImageScaleY}})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.multiple,expression:"multiple"}],staticClass:"viewer-navbar"},[i("ul",{staticClass:"viewer-list viewer-transition",style:e.listStyle},e._l(e.thumb,(function(t,n){return Array.isArray(e.thumb)?i("li",{key:n,class:{"viewer-active":e.listActiveIndex===n},on:{click:function(t){return e.switchActiveIndex(n)}}},[i("img",{staticStyle:{width:"50px",height:"50px",transform:"translateX(-10px)"},attrs:{src:t,role:"button","data-viewer-action":"view","data-index":"0","data-original-url":"images/tibet-1.jpg",alt:"Cuo Na Lake","data-filled":"true"}})]):e._e()})),0)])]),i("div",{staticClass:"viewer-tooltip viewer-show viewer-fade viewer-transition"},[e._v(" 1% ")]),i("div",{staticClass:"viewer-button",attrs:{role:"button","data-viewer-action":"mix"},on:{click:e.hideFullViewer}},[i("div",{staticClass:"close-btn"},[i("em",{staticClass:"iconfont icon-close close-icon"})])]),i("div",{staticClass:"viewer-player"})])])],2)},o=[],r=(n("8aa1"),n("8c46"),{methods:{fullScreen:function(e){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;t?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen&&e.requestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()},resetFullImageStatus:function(e){var t=this,i=this;this.$data.listActiveIndex=e;var n=this.$refs["fullImage"];if(!n)return!1;n.style.display="none",setTimeout((function(){var e=t.getImgNaturalStyle(n);t.$data.fullImageWidth=e[0],t.$data.fullImageHeight=e[1],n.style.display="",i.$data.fullViewZoom=i.viewZoom}),300)},showFullViewer:function(e){this.$data.fullViewerVisible=!0,this.resetFullImageStatus(e)},switchActiveIndex:function(e){this.resetFullImageStatus(e)},hideFullViewer:function(){this.$data.fullViewerVisible=!1},zoomIn:function(){this.$data.fullViewZoom+=.1},zoomOut:function(){this.$data.fullViewZoom-=.1},toggleZoomFullImage:function(e){this.$data.animateTimer&&(clearTimeout(this.$data.animateTimer),this.$data.animateTimer=null),e.target.classList.remove("animate-transform");var t=e.wheelDelta/12;t>0?this.$data.fullViewZoom+=.1:this.$data.fullViewZoom>1&&(this.$data.fullViewZoom-=.1),this.$data.animateTimer=setTimeout((function(){e.target.classList.add("animate-transform")}),400)},resetFullImageSize:function(){this.$data.fullViewZoom=this.viewZoom},getImgNaturalStyle:function(e,t){var i,n;if(e.naturalWidth)i=e.naturalWidth,n=e.naturalHeight;else{new Image;image.src=e.src,image.onload=function(){t(image.width,image.height)}}return[i,n]},mouseMove:function(e){e.preventDefault(),e.stopPropagation(),this.$data.fullImageMoveX+=e.movementX,this.$data.fullImageMoveY+=e.movementY},resetFullImage:function(){this.$data.fullViewZoom=this.viewZoom,this.$data.fullImageMoveX=0,this.$data.fullImageMoveY=0,this.$data.fullImageMoveX=0,this.$data.fullImageMoveY=0,this.$data.fullImageRotateX=0,this.$data.fullImageScaleX=0,this.$data.fullImageScaleY=0},fullImageRotateLeft:function(){this.$data.fullImageRotateX-=90},fullImageRotateRight:function(){this.$data.fullImageRotateX+=90},toggleFullImageScaleX:function(){this.$data.fullImageScaleX=0===this.$data.fullImageScaleX?-1:0},toggleFullImageScaleY:function(){this.$data.fullImageScaleY=0===this.$data.fullImageScaleY?-1:0},prev:function(){this.$data.listActiveIndex>=1&&this.switchActiveIndex(this.$data.listActiveIndex-1)},next:function(){this.$data.listActiveIndex<this.thumb.length-1&&this.switchActiveIndex(this.$data.listActiveIndex+1)},handleFullScreenChange:function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;!e&&this.$data.fullPlayTimer&&(clearInterval(this.$data.fullPlayTimer),this.$data.fullPlayTimer=null)},addFullScreenListener:function(){var e=this;document.addEventListener("fullscreenchange",(function(t){e.handleFullScreenChange()})),document.addEventListener("mozfullscreenchange",(function(t){e.handleFullScreenChange()})),document.addEventListener("webkitfullscreenchange",(function(t){e.handleFullScreenChange()})),document.addEventListener("msfullscreenchange",(function(t){e.handleFullScreenChange()}))},fullScreenPlay:function(){var e=this;this.fullScreen(this.$el.querySelector(".full-image")),this.$data.fullPlayTimer=setInterval((function(){var t=e.$data.listActiveIndex;t>=e.thumb.length-1?e.$data.listActiveIndex=0:e.$data.listActiveIndex=t+1,e.switchActiveIndex(e.$data.listActiveIndex)}),2e3)}}}),s={name:"vue-viewer",mixins:[r],data:function(){return{animateTimer:null,fullPlayTimer:null,fullViewerVisible:!1,fullViewZoom:1,fullImageWidth:0,fullImageHeight:0,fullImageMoveX:0,fullImageMoveY:0,fullImageRotateX:0,fullImageRotateY:0,fullImageScaleX:0,fullImageScaleY:0,listActiveIndex:0,startX:0,startY:0,touchStartX:0,touchStartY:0}},props:{thumb:{required:!0},full:{required:!1},multiple:{type:Boolean,default:!1},listUlClass:{type:String,required:!1},title:{required:!1,default:"-"}},computed:{fullImageMarginLeft:function(){return 0-this.$data.fullImageWidth/2+this.$data.fullImageMoveX},fullImageMarginTop:function(){return 0-this.$data.fullImageHeight/2+this.$data.fullImageMoveY},viewZoom:function(){var e=document.body.clientWidth,t=document.body.clientHeight;if(this.$data.fullImageWidth>e||this.$data.fullImageHeight>t){var i=parseInt(e/this.$data.fullImageWidth*1e3)/1e3,n=parseInt(t/this.$data.fullImageHeight*1e3)/1e3;return i<=n?i:n}return this.$data.fullViewZoom},fullImageStyle:function(){return{transform:"scale(".concat(this.$data.fullViewZoom,") rotate(").concat(this.$data.fullImageRotateX,"deg) ").concat(0===this.$data.fullImageScaleX?"":"scaleX(-1)"," ").concat(0===this.$data.fullImageScaleY?"":"scaleY(-1)"),width:this.$data.fullImageWidth+"px",height:this.$data.fullImageHeight+"px","margin-left":this.fullImageMarginLeft+"px","margin-top":this.fullImageMarginTop+"px",position:"absolute",left:"50%",top:"50%"}},listStyle:function(){return{width:Array.isArray(this.thumb)?31*this.thumb.length+"px":0,marginLeft:document.body.clientWidth/2-31*(this.$data.listActiveIndex+1)+"px"}}},methods:{imgLoad:function(){this.$emit("img-load")}},mounted:function(){var t=this;this.resetFullImage(),this.addFullScreenListener(),this.$refs["fullImage"].addEventListener("mousedown",(function(e){document.body.addEventListener("mousemove",t.mouseMove),e.preventDefault(),e.stopPropagation()})),this.$refs["fullImage"].addEventListener("mouseup",(function(){document.body.removeEventListener("mousemove",t.mouseMove)})),this.$refs["fullImage"].addEventListener("touchstart",(function(e){if(e.targetTouches&&1==e.targetTouches.length){var i=e.targetTouches[0];t.startX=t.fullImageMoveX,t.startY=t.fullImageMoveY,t.touchStartX=i.clientX,t.touchStartY=i.clientY}})),this.$refs["fullImage"].addEventListener("touchmove",(function(e){if(console.log("touchmove"),e.targetTouches&&1==e.targetTouches.length){var i=e.targetTouches[0];t.fullImageMoveX=t.startX+(i.clientX-t.touchStartX),t.fullImageMoveY=t.startY+(i.clientY-t.touchStartY)}})),this.$refs["fullImage"].addEventListener("dragstart",(function(){return e.preventDefault(),e.stopPropagation(),!1})),this.$refs["fullImage"].addEventListener("drop",(function(e){return e.preventDefault(),e.stopPropagation(),!1})),this.$refs["fullImage"].addEventListener("dblclick",(function(){t.$data.fullViewZoom=1}))}},d=s,c=(n("07a7"),n("cba8")),u=Object(c["a"])(d,a,o,!1,null,"422f4dbb",null);i["a"]=u.exports},dfb7:function(e,t,i){"use strict";i("2795")},f370:function(t,i,n){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.pageReady,expression:"pageReady"}],staticClass:"page-main",class:[{"rotate-default":!e.rotateDeg},{"rotate-default":0==e.rotateDeg},{"rotate-left":90==e.rotateDeg},{"rotate-right":-90==e.rotateDeg},{"rotate-over":180==e.rotateDeg}]},["android"==e.deviceType?i("div",{staticClass:"cam-panel"},[i("div",{staticClass:"video-container",attrs:{id:"videosContainer"}},[i("video",{class:[e.frontCameraFlag?"web-user-video":"web-environment-video"],attrs:{id:"webScanVideo",muted:"",width:"360px",height:"640px"},domProps:{muted:!0}}),i("canvas",{staticClass:"hide",attrs:{id:"webScanCanvas",width:"360px",height:"640px"}})]),i("div",{staticClass:"cam-control-top"},[i("a",{on:{click:e.closeCamera}},[e.recording?e._e():i("div",{staticClass:"close-camera"},[i("i",{staticClass:"iconfont icon-close1"})])]),i("a",{on:{click:e.changeCamera}},[e.recording?e._e():i("div",{staticClass:"switch-camera"},[i("i",{staticClass:"iconfont icon-switch-camera"})])])]),i("div",{staticClass:"cam-control-time"},[i("a",[e.recording?i("div",{staticClass:"record-time"},[e._v(" "+e._s(e.timeShow)+" ")]):e._e()])]),i("div",{staticClass:"cam-control"},[i("a",{staticClass:"cam-btn",on:{click:e.changeRecord}},[i("div",{staticClass:"circle-out-border"},[i("div",{staticClass:"circle-out"},[e.recording?i("div",{staticClass:"circle-in-doing"}):i("div",{staticClass:"circle-in-before"})])])]),e.sending?e._e():i("a",{staticClass:"send-file",on:{click:e.sendVideo}},[e.previewing?i("div",{staticClass:"defined-btn"},[e._v(" 发送 ")]):e._e()])])]):i("div",{staticClass:"cam-panel"},[i("div",{staticClass:"video-container",attrs:{id:"videosContainer"}},[i("video",{attrs:{id:"webScanVideo",muted:"",autoplay:"",controls:"",loop:"","webkit-playsinline":"",playsinline:"","x5-playsinline":"","x-webkit-airplay":"allow",width:"360px",height:"640px"},domProps:{muted:!0}}),i("canvas",{staticClass:"hide",attrs:{id:"webScanCanvas",width:"360px",height:"640px"}})]),i("div",{staticClass:"cam-control"},[i("input",{staticClass:"hide",attrs:{type:"file",name:"video",id:"webScanInput",accept:"video/*",capture:"user"},on:{change:function(t){return e.selectVideo(t)}}}),i("a",{staticClass:"cam-btn",on:{click:function(t){return e.videoInput()}}},[i("div",{staticClass:"circle-out-border"},[i("div",{staticClass:"circle-out"},[e.recording?i("div",{staticClass:"circle-in-doing"}):i("div",{staticClass:"circle-in-before"})])])]),i("a",{staticClass:"send-file",on:{click:e.sendVideo}},[e.previewing?i("div",{staticClass:"defined-btn"},[e._v(" 发送 ")]):e._e()])])])])},o=[],r=n("b49e"),s=(n("01d7"),n("426a"),n("657a"),n("5bf8"),n("2b12"),n("8c46"),n("c415"),n("64bb"),n("87f4"),n("ae12"),n("cb99"),n("3d7a"),n("5b50"),n("5543"),n("85b1"),n("4595"),n("5880")),d=n("a2c7"),c={name:"H5WebCam",components:{},mixins:[d["a"]],data:function(){return{basePath:"",recording:!1,previewing:!1,sending:!1,openBtn:null,startBtn:null,saveBtn:null,recorderFile:null,stopRecordCallback:null,mediaRecorder:null,mediaRecorderOptions:{audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:"video/webm"},videosContainer:null,recordTime:0,exArray:[],exIndex:0,frontCameraFlag:!0,deviceType:"android",userAgent:this.$mk_getUserAgent(),landscape:!1,pageWidth:0,pageHeight:0,videoWidth:0,videoHeight:0,videoWidthJson:{min:640,ideal:640,max:640},videoHeightJson:{min:360,ideal:360,max:360},mediaOpts:{audio:!0,video:{facingMode:"user",frameRate:{ideal:10,max:15},width:{min:640,ideal:640,max:640},height:{min:360,ideal:360,max:360}}},timeTimer:0,timeShow:"",webScanVideo:null,webScanCanvas:null,videoFile:null,servicePathReg:null,webPath:"",fullscreen:!1,videoURL:"",exitSuccess:!1,rotateDeg:0,windowFocus:!1,recordState:!1,pageReady:!1}},props:{imageId:{type:String,default:""}},created:function(){this.servicePathReg=new RegExp("@servicePath@|@webPath@","g")},mounted:function(){var e=this;e.webScanVideo=document.getElementById("webScanVideo"),e.webScanCanvas=document.getElementById("webScanCanvas"),e.checkArgument(),e.initDeviceType(),"android"==e.deviceType&&(e.pageReady=!0),"onorientationchange"in window&&window.addEventListener("orientationchange",e.orientationHandler,!1),e.fullScreen(),setTimeout((function(){e.$nextTick((function(){if(e.initData(),"android"==e.deviceType)e.selectMimeType(),e.openCamera(),window.onresize=e.resizeHandler(),e.addListener();else{var t=document.getElementById("webScanInput");t.click(),window.onfocus=function(){e.windowFocus=!0},window.onblur=function(){e.windowFocus=!1,e.recordState||e.exitFullScreen()}}}))}),500)},beforeDestroy:function(){this.removeListener()},methods:Object(r["a"])(Object(r["a"])({},Object(s["mapMutations"])({updateUploadInfo:"visitor/updateUploadInfo",deleteUploadInfo:"visitor/deleteUploadInfo"})),{},{initDeviceType:function(){this.userAgent.isMobile&&this.userAgent.isIOS&&(this.deviceType="ios")},addListener:function(){document.addEventListener&&(document.addEventListener("fullscreenchange",this.exitHandler,!1),document.addEventListener("mozfullscreenchange",this.exitHandler,!1),document.addEventListener("MSFullscreenChange",this.exitHandler,!1),document.addEventListener("webkitfullscreenchange",this.exitHandler,!1))},removeListener:function(){document.removeEventListener&&(document.removeEventListener("fullscreenchange",this.exitHandler,!1),document.removeEventListener("mozfullscreenchange",this.exitHandler,!1),document.removeEventListener("MSFullscreenChange",this.exitHandler,!1),document.removeEventListener("webkitfullscreenchange",this.exitHandler,!1),window.removeEventListener("orientationchange",this.orientationHandler,!1))},landScapeCheck:function(){this.rotateDeg=window.orientation,180!==window.orientation&&0!==window.orientation||(this.landscape=!1),90!==window.orientation&&-90!==window.orientation||(this.landscape=!1)},resizeHandler:function(){this.checkFullScreen()?(this.landScapeCheck(),this.changeVideoSize()):this.$emit("update:is-show",!1)},orientationHandler:function(){var e=this;e.rotateDeg=window.orientation,this.pageWidth=document.documentElement.clientWidth,this.pageHeight=document.documentElement.clientHeight,this.landScapeCheck(),this.changeVideoSize()},showVideoAndExit:function(){this.$emit("update:video-src",this.videoURL),this.$emit("update:is-show",!1),this.exitSuccess=!0},exitHandler:function(e){var t=e.type;t&&(t.startsWith("full")?document.fullScreen||this.showVideoAndExit():t.startsWith("webkit")?document.webkitIsFullScreen||this.showVideoAndExit():t.startsWith("moz")?document.mozFullScreen||this.showVideoAndExit():t.startsWith("MS")&&(document.msFullscreenElement||this.showVideoAndExit()))},fullScreen:function(){var e=document.documentElement,t=e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen||e.requestFullScreen;if(t)t.call(e);else if("undefined"!==typeof window.ActiveXObject){var i=new ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}this.fullscreen=!0},exitFullScreen:function(){var e=this,t=document,i=t.webkitExitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.exitFullscreen;if(i)i.call(t);else if("undefined"!==typeof window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}setTimeout((function(){e.exitSuccess||(e.$emit("update:video-src",e.videoURL),e.$emit("update:is-show",!1))}),500),this.fullscreen=!1},checkFullScreen:function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;return void 0===e&&(e=!1),e},initVideoSize:function(){this.pageWidth=document.documentElement.clientWidth,this.pageHeight=document.documentElement.clientHeight,this.pageWidth>=this.pageHeight?(this.videoWidth=this.pageWidth,this.videoHeight=this.pageHeight,this.userAgent.isMobile&&(this.landscape=!0)):(this.videoWidth=this.pageHeight,this.videoHeight=this.pageWidth,this.userAgent.isMobile&&(this.landscape=!1)),this.videoWidthJson.max=this.videoWidth,this.videoWidthJson.ideal=this.videoWidth,this.videoWidthJson.min=this.videoWidth,this.videoHeightJson.max=this.videoHeight,this.videoHeightJson.ideal=this.videoHeight,this.videoHeightJson.min=this.videoHeight,this.userAgent.isMobile?navigator.mozGetUserMedia?(this.mediaOpts.video.width=this.videoWidth,this.mediaOpts.video.height=this.videoHeight):(this.mediaOpts.video.width=this.videoWidthJson,this.mediaOpts.video.height=this.videoHeightJson):navigator.mozGetUserMedia?(this.mediaOpts.video.width=this.videoHeight,this.mediaOpts.video.height=this.videoWidth):(this.mediaOpts.video.width=this.videoHeightJson,this.mediaOpts.video.height=this.videoWidthJson)},widthGT:function(){this.webScanVideo.width=this.videoWidth,this.webScanVideo.height=this.videoHeight,this.webScanCanvas.width=this.videoWidth,this.webScanCanvas.height=this.videoHeight},heightGT:function(){this.webScanVideo.width=this.videoHeight,this.webScanVideo.height=this.videoWidth,this.webScanCanvas.width=this.videoHeight,this.webScanCanvas.height=this.videoWidth},changeVideoSize:function(){this.userAgent.isMobile?90==Math.abs(this.rotateDeg)||this.landscape?this.widthGT():this.heightGT():this.landscape?this.heightGT():this.widthGT()},listDevices:function(){navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){"videoinput"==e.kind&&that.exArray.push(e.deviceId)}))}))},checkMimeType:function(e){return!!MediaRecorder.isTypeSupported(e)&&(this.mediaRecorderOptions.mimeType=e,!0)},selectMimeType:function(){var e="";e="video/3gpp",this.checkMimeType(e),e="video/3gpp2",this.checkMimeType(e),e="video/3gp2",this.checkMimeType(e),e="video/mpeg",this.checkMimeType(e),e="video/mp4",this.checkMimeType(e),e="video/mp4;codecs=AVC",this.checkMimeType(e),e="video/mp4;codecs=AV1",this.checkMimeType(e),e="video/mp4;codecs=H.263",this.checkMimeType(e),e="video/mp4;codecs=MPEG-4 Part 2 Visual",this.checkMimeType(e),e="video/mp4;codecs=VP9",this.checkMimeType(e),e="video/mp4;codecs='avc1.424028, mp4a.40.2'",this.checkMimeType(e),e='video/mp4;codecs="avc1.4d002a"',this.checkMimeType(e),e="video/ogg",this.checkMimeType(e),e="video/ogg;codecs=Theora",this.checkMimeType(e),e="video/ogg;codecs=VP8",this.checkMimeType(e),e="video/ogg;codecs=VP9",this.checkMimeType(e),e="video/quicktime",this.checkMimeType(e),e="video/webm",this.checkMimeType(e),e="video/webm;codecs=AV1",this.checkMimeType(e),e="video/webm;codecs=VP8",this.checkMimeType(e),e="video/webm;codecs=VP9",this.checkMimeType(e),e="video/webm;codecs=Opus",this.checkMimeType(e),e="video/webm;codecs=Vorbis",this.checkMimeType(e),e='video/webm;codecs="vp8,vorbis"',this.checkMimeType(e),e='video/webm;codecs="vp9,opus"',this.checkMimeType(e),e="video/webm;codecs=daala",this.checkMimeType(e),e="video/webm;codecs=h264",this.checkMimeType(e),e="application/mp4",this.checkMimeType(e),e="video/webm",this.checkMimeType(e)},showTime:function(){this.recordTime++,this.timeShow=this.$mk_formatSecond(this.recordTime)},initData:function(){this.initVideoSize(),this.changeVideoSize(),this.setMediaOpts()},changeCamera:function(){this.frontCameraFlag=!this.frontCameraFlag,this.setMediaOpts(),this.openCamera()},setMediaOpts:function(){this.frontCameraFlag?this.mediaOpts.video.facingMode="user":(this.mediaOpts.video.facingMode={},this.mediaOpts.video.facingMode.exact="environment")},getUserMedia:function(e,t,i){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||window.getUserMedia,void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(i,n){t.call(navigator,e,i,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var n=navigator.mediaDevices.getUserMedia(this.mediaOpts);n.then((function(e){i(!1,e)}))["catch"]((function(e){i(e)}))}else navigator.getUserMedia?navigator.getUserMedia(constraints,(function(e){i(!1,e)}),(function(e){i(e)})):i(new Error("Not support userMedia"))},closeStream:function(e){if(e)if("function"===typeof e.stop)e.stop();else for(var t=[e.getAudioTracks(),e.getVideoTracks()],i=0;i<t.length;i++){var n=t[i];if(n&&n.length>0)for(var a=0;a<n.length;a++){var o=n[a];"function"===typeof o.stop&&o.stop()}}},openCamera:function(){this.webScanVideo.controls=!1,this.webScanVideo.autoplay=!1;var e=this;return new Promise((function(t){e.getUserMedia(!0,!1,(function(i,n){if(i)throw i;e.mediaRecorder=new MediaRecorder(n),e.mediaStream=n;var a=[];e.webScanVideo.srcObject=n,e.webScanVideo.play(),e.mediaRecorder.blobs=[],e.mediaRecorder.ondataavailable=function(t){e.mediaRecorder.blobs.push(t.data),a.push(t.data)},e.mediaRecorder.onstart=function(){e.recordTime=0,setTimeout((function(){e.stopRecord()}),1e3*parseInt("180"))},e.mediaRecorder.onstop=function(t){window.clearInterval(e.timeTimer),e.recorderFile=new Blob(a,{type:e.mediaRecorder.mimeType});Math.round(e.recorderFile.size/1024).toFixed();a=[],null!=e.stopRecordCallback&&e.stopRecordCallback()},t()}))}))},closeCamera:function(e){this.mediaRecorder&&"inactive"!=this.mediaRecorder.state&&this.mediaRecorder.stop(),this.closeStream(this.mediaStream),this.exitFullScreen(),this.$emit("update:is-show",!1)},changeRecord:function(){this.recording?this.stopRecord():this.startRecord()},startRecord:function(){var e=this;this.openCamera().then((function(){e.recording=!0,e.previewing=!1,e.timeTimer=setInterval(e.showTime,1e3),e.mediaRecorder.start()}))},stopRecord:function(){var e=this;this.stopRecordCallback=function(){e.recording=!1,e.recordTime=0,e.previewVideo()},this.mediaRecorder&&"inactive"!=this.mediaRecorder.state&&this.mediaRecorder.stop(),this.closeStream(this.mediaStream)},saver:function(){try{var t=this,i=new File([t.recorderFile],"msr-"+(new Date).toISOString().replace(/:|\./g,"-")+".webm",{type:"video/webm"});saveAs(i)}catch(e){console.log(e)}},previewVideo:function(){var e=this;e.sending=!1,e.previewing=!0,e.recording=!1,e.webScanVideo.controls=!0,e.webScanVideo.autoplay=!0,e.webScanVideo.loop=!0,e.webScanVideo.srcObject=null,e.videoURL=URL.createObjectURL(e.recorderFile),e.webScanVideo.src=e.videoURL,e.webScanVideo.load()},videoInput:function(){var e=this,t=document.getElementById("webScanInput");t.click(),e.recordState=!1},videoChange:function(e){var t=this,i=document.getElementById("webScanInput");if(i.files&&i.files.length>0){t.videoFile=i.files[0],t.recordState=!0;Math.round(t.videoFile.size/1024).toFixed();t.videoURL=URL.createObjectURL(t.videoFile),t.uploadVideo2(t.imageId,t.videoFile).then((function(){t.sending=!1,t.$emit("update:is-uploading",t.sending)})).then((function(){t.sending=!1,t.$emit("update:is-uploading",t.sending)})),t.showVideoAndExit()}},sendVideo:function(){var e=this;if("android"==e.deviceType&&(e.videoFile=new File([e.recorderFile],"msr-"+(new Date).toISOString().replace(/:|\./g,"-")+".webm")),e.videoFile.size>62914560)window.MessageNotice({type:"error",message:e.$mk_i18n("dialogue.fileSizeLimt")+"60M",duration:2e3});else{var t=document.createElement("video");t.preload="metadata",t.onloadedmetadata=function(){var i=t.duration;i===1/0?(t.currentTime=1e101,t.ontimeupdate=function(){this.ontimeupdate=function(){},t.currentTime=1e101,t.currentTime=0,i=t.duration,e.sendVideo2(t)}):e.sendVideo2(t)},t.src=URL.createObjectURL(e.videoFile)}},sendVideo2:function(e){var t=this,i=e.duration,n=Math.round(i).toFixed();n>parseInt("180")?window.MessageNotice({type:"error",message:t.$mk_i18n("dialogue.videoLengthLimit")+"180s",duration:2e3}):(t.sending=!0,t.pushFileMessage(t.imageId,t.videoURL),t.uploadVideo2(t.imageId,t.videoFile).then((function(){t.sending=!1,t.$emit("update:is-uploading",t.sending)})).then((function(){t.sending=!1,t.$emit("update:is-uploading",t.sending)})),t.exitFullScreen())},checkArgument:function(){navigator.mimeTypes},takePhoto:function(){var e=canvas.getContext("2d");this.userAgent.isMobile?e.drawImage(this.webScanVideo,0,0,this.videoHeight,this.videoWidth):e.drawImage(this.webScanVideo,0,0,this.videoWidth,this.videoHeight)}}),computed:Object(r["a"])({},Object(s["mapState"])({userInfo:function(e){return e.user.userInfo}})),watch:{pageReady:{handler:function(e,t){},deep:!0,immediate:!0}}},u=c,l=(n("ca3d"),n("cba8")),_=Object(l["a"])(u,a,o,!1,null,"4708c687",null);i["a"]=_.exports},ffcc:function(e,t,i){}}]);